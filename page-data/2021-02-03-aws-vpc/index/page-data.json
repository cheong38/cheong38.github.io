{"componentChunkName":"component---src-templates-post-tsx","path":"/2021-02-03-aws-vpc/index/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABIElEQVQoz52Su0oDQRSGZ8bWVgTBUlGxsbRMYQw2boiNhYKgkEewFKx8DFuLFKbMK9jbiIEU9rnMZSPs+p1ks+7GbeKBj//M7M4/Z86MUkuRpqnyPtY+xMa5YLwX4r+EuQ5HdrZuYn1usJEkSYSewZr6R4zGtlRRHZqYPkJL5ti5BpF1oeZ8uCK/pdIIbaMX6KXkfDvHbH25wns4xmwPnmQuhPiOIw1Z/Iy+MO5CD15Fmeti2CF/e/8YGFkznrjc8AYeoLGokN5twglswSHsww6cYta2zh9Q0TYbHpXMJDDRmF2juzL+7H+t1L+SWVahLpibrIcqu0VdZDr91vNXEAz90xx59j/z0qbfZyKmC+NsXHmLosW8MqgqN6gyWzV+AM1IPLU6r0ZQAAAAAElFTkSuQmCC","width":400,"height":174,"src":"/static/901980ec635ef9ce37ac8ad1c445a1bc/497c6/woojin-logo.png","srcSet":"/static/901980ec635ef9ce37ac8ad1c445a1bc/497c6/woojin-logo.png 1x"}}},"markdownRemark":{"html":"<h1>VPC</h1>\n<p><strong>V</strong>irtual <strong>P</strong>rivate <strong>C</strong>loud</p>\n<p>클라우드 상에서 논리적으로 공간을 격리하기 위해 사용한다.</p>\n<p>VPC 가 없다면 EC2 인스턴스들이 서로 혹은 인터넷과 스파게티처럼 연결될 것이다. 이렇게 되면 시스템의 복잡도가 엄청나게 올라간다.\n최악의 경우, 하나의 인스턴스를 추가하는 데에 거의 모든 인스턴스를 수정해야 하는 상황이 발생할 수 있다.\nEC2 인스턴스를 VPC 로 묶고, VPC 별로 네트워크 설정을 해준다면, 이 복잡도를 완화시킬 수 있다.</p>\n<h2>VPC in AWS</h2>\n<p>region 별로 복수의 VPC 를 생성할 수 있는데, 최대 5개까지 생성 가능한다. (이 limit 은 AWS 에 요청하여 늘릴 수 있다.)</p>\n<p>CIDR 는 VPC 당 최대 5개 이며, 각각의 CIDR 는 아래와 같은 제한을 갖는다.</p>\n<ul>\n<li>최소 서브넷 크기는 /28 = 16 개의 IP</li>\n<li>최대 서브넷 크기는 /16 = 65,536 개의 IP</li>\n</ul>\n<p>VPC 는 private 이기 때문에, 오직 private IP 대역만 허용한다.</p>\n<p>VPC CIDR 는 가지고 있는 다른 네트워크의 CIDR 와 겹쳐서는 안된다.</p>\n<p>CIDR 와 public, private IP 에 대한 설명은 <a href=\"/2021-02-02-cidr-public-private-ip/index/\">지난 포스팅</a> 을 참고한다.</p>\n<h2>Default VPC (기본 VPC)</h2>\n<p>AWS 에서는 새로 계정을 생성하면 region 별로 기본 VPC 를 생성하여 제공한다.</p>\n<p>기본 VPC 는 인터넷 연결을 가지고 있고, 모든 인스턴스는 public IP 를 갖게 된다.</p>\n<p>또한, public, private DNS 이름도 갖게 된다.</p>\n<h2>Subnets in VPC</h2>\n<p>VPC 의 subnet 은 AZ(Availability Zone) 에 종속된다. VPC 내에 다수의 subnet 을 생성할 수 있다.\n이 때, subnet 의 CIDR 는 VPC 의 CIDR 범위 안에 있어야 한다.</p>\n<p>public subnet 은 인터넷에 연결된 subnet 을 말하고, private subnet 은 인터넷에 연결되지 않은 subnet 을 말한다.</p>\n<p>일반적으로 public subnet 은 private subnet 에 비해 작은 CIDR 를 갖는다.</p>\n<p>AWS 는 각 subnet 별로 5개의 IP 주소를 예약한다. (첫 4개 + 마지막 1개)</p>\n<p>예: 10.0.0.0/24 CIDR 블록에 대해</p>\n<ul>\n<li>10.0.0.0: 네트워크 주소</li>\n<li>10.0.0.1: VPC 라우터를 위해 예약</li>\n<li>10.0.0.2: 아마존에서 제공하는 DNS 매핑을 위해 예약</li>\n<li>10.0.0.3: 향후 사용을 위해 예약</li>\n<li>10.0.0.255: 네트워크 브로드캐스트 주소 (AWS 는 VPC 내 브로드캐스트를 지원하지는 않는다. 단순히 예약되어있어 사용은 불가.)</li>\n</ul>\n<h2>Internet Gateway (IGW)</h2>\n<p>IGW 는 VPC 인스턴스가 인터넷에 연결될 수 있게 한다.\nIGW 를 설정하지 않으면, public IP 를 할당 받더라도 EC2 인스턴스는 인터넷에 연결되지 않는다.</p>\n<p>IGW 는 VPC 와 분리되어 생성된다.</p>\n<p>VPC 는 오직 하나의 IGW 에 attach 될 수 있으며, IGW 역시 하나의 VPC 를 attach 할 수 있다.</p>\n<p>IGW 자체로는 인터넷 접근을 허용할 수는 없으며, Route table 이 같이 편집되어야 한다.</p>\n<h2>NAT 인스턴스</h2>\n<p>NAT: <strong>N</strong>etowrk <strong>A</strong>ddress <strong>T</strong>ranslation</p>\n<p>(Outdated 되어 사용을 권하진 않음, <a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/VPC_NAT_Instance.html\">참고</a>) </p>\n<p>NAT 인스턴스는 private subnet 을 인터넷에 연결할 수 있게 한다.</p>\n<p>public subnet 에 런치되어야 한다.</p>\n<p>EC2 의 Source/Destination Check 플래그를 disable 해야 한다.</p>\n<p>Elastic IP 가 attach 되어 있어야 한다.</p>\n<p>Route table 이 private subnet 으로부터 NAT 인스턴스로 route 하도록 설정되어 있어야 한다.</p>\n<p>즉, public subnet 에 인스턴스를 하나 띄워서 private subnet 의 인스턴스가 그 인스턴스를 통해 인터넷에 접근하도록 만드는 것이다.</p>\n<p>NAT 인스턴스는 Community AMI 에서 검색하여 사용하면 된다. </p>\n<h3>단점</h3>\n<ul>\n<li>인스턴스의 유형에 따라 성능의 차이를 보일 수 있다. (micro 와 같이 작은 인스턴스 사용시에는 네트워크 성능이 저하될 수 있음)</li>\n<li>새로운 포트의 개방이 필요할때마다 NAT 인스턴스의 security group 을 수정해주어야 한다.</li>\n</ul>\n<h2>NAT Gateway</h2>\n<p>NAT gateway 는 NAT 인스턴스의 대안으로 사용하면 된다. NAT 인스턴스의 기능을 AWS 에서 managed 서비스로 제공하는 것이다.</p>\n<p>지정된 AZ 에 Elastic IP 를 사용하여 NAT gateway 를 생성하게 된다.</p>\n<p>NAT Gateway 가 설정된 subnet 안의 인스턴스는 사용이 불가하고 다른 subnet 의 인스턴스만 사용이 가능하다.</p>\n<p>NAT Gateway 는 Internet Gateway 를 필요로 한다. (Private Subnet => NAT => IGW)</p>\n<p>45Gbps 까지 bandwidth 가 자동적으로 스케일업이 가능하다.</p>\n<p>Security Group 을 생성하고 관리할 필요가 없다.</p>\n<p>NAT 인스턴스와 NAT Gateway 의 비교는 <a href=\"https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/vpc-nat-comparison.html\">이 문서</a> 를 보면 자세히 나와 있다.</p>\n<h2>Network ACLs (NACL)</h2>\n<p>NACL 은 subnet 에 적용되는 firewall 이라 생각하면 된다.\n하나의 subnet 당 하나의 NACL 이 있으며, 새로 생성된 subnet 에서는 Default NACL 이 할당된다.\nDefault NACL 은 모든 outbound, inbound 트래픽을 허용한다.\n단, 새로 임의로 생성한 NACL 은 모든 outbound, inbound 트래픽을 deny 하도록 생성된다. </p>\n<p>NACL 은 다음과 같은 규칙을 정의한다.</p>\n<ul>\n<li>규칙은 1 ~ 32766 의 숫자를 갖고, 낮은 숫자일수록 우선순위가 높다.</li>\n<li>마지막 규칙은 asterisk(*) 이고 다른 모든 규칙이 매칭되지 않을 때의 행동을 정의한다.</li>\n<li>AWS 에서는 규칙별로 100단위로 숫자를 할당하는 것을 권장한다. (추후 중간에 규칙을 끼워넣을 수 있도록)</li>\n</ul>\n<p>NACL 은 subnet 수준에서 특정한 IP 를 블록하는 좋은 수단이다. </p>\n<h3>Network ACLs vs Security Group (SG)</h3>\n<p>NACL 은 subnet 단위, SG 는 EC2 인스턴스 단위의 규칙이라는 점에서 가장 크게 차이점이 있다.</p>\n<p>NACL 은 allow, deny 규칙을 지원하지만, SG 는 allow 규칙만 지원한다.</p>\n<p>또한 NACL 은 stateless 지만, SG 는 stateful 하다.\n(stateless: 규칙에 명시되어 있는대로만 행동함, stateful: return 트래픽에 대해서는 규칙에 상관없이 허용됨)</p>\n<p>이 외의 NACL 와 SG 의 차이점은 <a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Security.html\">이 문서</a> 를 참조하도록 하자.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"VPC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"V"}]},{"type":"text","value":"irtual "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"P"}]},{"type":"text","value":"rivate "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"C"}]},{"type":"text","value":"loud"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"클라우드 상에서 논리적으로 공간을 격리하기 위해 사용한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"VPC 가 없다면 EC2 인스턴스들이 서로 혹은 인터넷과 스파게티처럼 연결될 것이다. 이렇게 되면 시스템의 복잡도가 엄청나게 올라간다.\n최악의 경우, 하나의 인스턴스를 추가하는 데에 거의 모든 인스턴스를 수정해야 하는 상황이 발생할 수 있다.\nEC2 인스턴스를 VPC 로 묶고, VPC 별로 네트워크 설정을 해준다면, 이 복잡도를 완화시킬 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"VPC in AWS"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"region 별로 복수의 VPC 를 생성할 수 있는데, 최대 5개까지 생성 가능한다. (이 limit 은 AWS 에 요청하여 늘릴 수 있다.)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"CIDR 는 VPC 당 최대 5개 이며, 각각의 CIDR 는 아래와 같은 제한을 갖는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"최소 서브넷 크기는 /28 = 16 개의 IP"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"최대 서브넷 크기는 /16 = 65,536 개의 IP"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"VPC 는 private 이기 때문에, 오직 private IP 대역만 허용한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"VPC CIDR 는 가지고 있는 다른 네트워크의 CIDR 와 겹쳐서는 안된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"CIDR 와 public, private IP 에 대한 설명은 "},{"type":"element","tagName":"a","properties":{"href":"/2021-02-02-cidr-public-private-ip/index/"},"children":[{"type":"text","value":"지난 포스팅"}]},{"type":"text","value":" 을 참고한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Default VPC (기본 VPC)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"AWS 에서는 새로 계정을 생성하면 region 별로 기본 VPC 를 생성하여 제공한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기본 VPC 는 인터넷 연결을 가지고 있고, 모든 인스턴스는 public IP 를 갖게 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"또한, public, private DNS 이름도 갖게 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Subnets in VPC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"VPC 의 subnet 은 AZ(Availability Zone) 에 종속된다. VPC 내에 다수의 subnet 을 생성할 수 있다.\n이 때, subnet 의 CIDR 는 VPC 의 CIDR 범위 안에 있어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"public subnet 은 인터넷에 연결된 subnet 을 말하고, private subnet 은 인터넷에 연결되지 않은 subnet 을 말한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"일반적으로 public subnet 은 private subnet 에 비해 작은 CIDR 를 갖는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"AWS 는 각 subnet 별로 5개의 IP 주소를 예약한다. (첫 4개 + 마지막 1개)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예: 10.0.0.0/24 CIDR 블록에 대해"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"10.0.0.0: 네트워크 주소"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"10.0.0.1: VPC 라우터를 위해 예약"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"10.0.0.2: 아마존에서 제공하는 DNS 매핑을 위해 예약"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"10.0.0.3: 향후 사용을 위해 예약"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"10.0.0.255: 네트워크 브로드캐스트 주소 (AWS 는 VPC 내 브로드캐스트를 지원하지는 않는다. 단순히 예약되어있어 사용은 불가.)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Internet Gateway (IGW)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"IGW 는 VPC 인스턴스가 인터넷에 연결될 수 있게 한다.\nIGW 를 설정하지 않으면, public IP 를 할당 받더라도 EC2 인스턴스는 인터넷에 연결되지 않는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"IGW 는 VPC 와 분리되어 생성된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"VPC 는 오직 하나의 IGW 에 attach 될 수 있으며, IGW 역시 하나의 VPC 를 attach 할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"IGW 자체로는 인터넷 접근을 허용할 수는 없으며, Route table 이 같이 편집되어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"NAT 인스턴스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NAT: "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"N"}]},{"type":"text","value":"etowrk "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"A"}]},{"type":"text","value":"ddress "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"T"}]},{"type":"text","value":"ranslation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"(Outdated 되어 사용을 권하진 않음, "},{"type":"element","tagName":"a","properties":{"href":"https://docs.aws.amazon.com/vpc/latest/userguide/VPC_NAT_Instance.html"},"children":[{"type":"text","value":"참고"}]},{"type":"text","value":") "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NAT 인스턴스는 private subnet 을 인터넷에 연결할 수 있게 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"public subnet 에 런치되어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"EC2 의 Source/Destination Check 플래그를 disable 해야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Elastic IP 가 attach 되어 있어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Route table 이 private subnet 으로부터 NAT 인스턴스로 route 하도록 설정되어 있어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"즉, public subnet 에 인스턴스를 하나 띄워서 private subnet 의 인스턴스가 그 인스턴스를 통해 인터넷에 접근하도록 만드는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NAT 인스턴스는 Community AMI 에서 검색하여 사용하면 된다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"단점"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"인스턴스의 유형에 따라 성능의 차이를 보일 수 있다. (micro 와 같이 작은 인스턴스 사용시에는 네트워크 성능이 저하될 수 있음)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"새로운 포트의 개방이 필요할때마다 NAT 인스턴스의 security group 을 수정해주어야 한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"NAT Gateway"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NAT gateway 는 NAT 인스턴스의 대안으로 사용하면 된다. NAT 인스턴스의 기능을 AWS 에서 managed 서비스로 제공하는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"지정된 AZ 에 Elastic IP 를 사용하여 NAT gateway 를 생성하게 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NAT Gateway 가 설정된 subnet 안의 인스턴스는 사용이 불가하고 다른 subnet 의 인스턴스만 사용이 가능하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NAT Gateway 는 Internet Gateway 를 필요로 한다. (Private Subnet => NAT => IGW)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"45Gbps 까지 bandwidth 가 자동적으로 스케일업이 가능하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Security Group 을 생성하고 관리할 필요가 없다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NAT 인스턴스와 NAT Gateway 의 비교는 "},{"type":"element","tagName":"a","properties":{"href":"https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/vpc-nat-comparison.html"},"children":[{"type":"text","value":"이 문서"}]},{"type":"text","value":" 를 보면 자세히 나와 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Network ACLs (NACL)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NACL 은 subnet 에 적용되는 firewall 이라 생각하면 된다.\n하나의 subnet 당 하나의 NACL 이 있으며, 새로 생성된 subnet 에서는 Default NACL 이 할당된다.\nDefault NACL 은 모든 outbound, inbound 트래픽을 허용한다.\n단, 새로 임의로 생성한 NACL 은 모든 outbound, inbound 트래픽을 deny 하도록 생성된다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NACL 은 다음과 같은 규칙을 정의한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"규칙은 1 ~ 32766 의 숫자를 갖고, 낮은 숫자일수록 우선순위가 높다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"마지막 규칙은 asterisk(*) 이고 다른 모든 규칙이 매칭되지 않을 때의 행동을 정의한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"AWS 에서는 규칙별로 100단위로 숫자를 할당하는 것을 권장한다. (추후 중간에 규칙을 끼워넣을 수 있도록)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NACL 은 subnet 수준에서 특정한 IP 를 블록하는 좋은 수단이다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Network ACLs vs Security Group (SG)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NACL 은 subnet 단위, SG 는 EC2 인스턴스 단위의 규칙이라는 점에서 가장 크게 차이점이 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NACL 은 allow, deny 규칙을 지원하지만, SG 는 allow 규칙만 지원한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"또한 NACL 은 stateless 지만, SG 는 stateful 하다.\n(stateless: 규칙에 명시되어 있는대로만 행동함, stateful: return 트래픽에 대해서는 규칙에 상관없이 허용됨)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 외의 NACL 와 SG 의 차이점은 "},{"type":"element","tagName":"a","properties":{"href":"https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Security.html"},"children":[{"type":"text","value":"이 문서"}]},{"type":"text","value":" 를 참조하도록 하자."}]}],"data":{"quirksMode":false}},"excerpt":"VPC Virtual Private Cloud 클라우드 상에서 논리적으로 공간을 격리하기 위해 사용한다. VPC 가 없다면 EC…","timeToRead":4,"frontmatter":{"title":"AWS VPC 기본","userDate":"3 February 2021","date":"2021-02-03T00:00:00.000Z","tags":["AWS","VPC","Basic"],"excerpt":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAC6klEQVQ4y11SW0hUURQdrT6CKAiijwoEHzMqlc2dcfCjoIKQSCiIPgyCCGMUP4IICh85ekfHx4yFFgSDUWQP0opSNCds7EFEhGEUUdCXn2WU996Ze+/M2a195mrSgc3ZZz/WXmfv7dLDiksL+1x8oOc791rIcUhMU5V+3CchG9iH2HzO0VWF43J5K3SXpv4HpipV0L9RXyVRLJAT6LDNQw44OflLN+LzlkFVBxTKEjM39EXqrSQwsfC28LaQaGW7/QD1MbDi5KxzOQe2PIe9fHClPMcxStEAJ5lOstAgju6AKp/wnoLMAzQOWb8SdFlBwCY4/6Q6kdxZySAQv9A7WSpZmGHGjqAV0SpKR9CKgSpi0KXWybZBWeV8YY/BTFSFtNZSCaiFtpPWVk5ai0dozcVC76ggrWNXVmsqymgtJRld9XKR38ipXmbosDwKx4IRVkjvCoj0/bMC0yUjXkupm3WUfhIiM9Ev9Nh+0qN7hfUqLszJHhmLOJHJteIdgIvBUPHzN3NGX1YL7SD7yzQZ146R9fo6WS/jZM+NkznRRdbbYWkzn10i6/2oSI+cA3s3t8PmbQDgHAPepb4A4TZRkbSmQmFODwpzKioBUreCZH8cp/RYO4OQPfuQjKtHCIWF3rMbeV6n3yADtjyMWTuSY8cD4P6lhhvI/joDNkNkXDlMmfk5Mp/24rv7wHaMjMEa0i9X/wNG7xlMAv5o887yOiyqSlbjQbRXyMoimyFzspuMgUNkf07Q4oUCZi9Zm9MDZH94TKl7Z3IDwwYwGIaadb1pLBviL1td/rQE5CnDmX5wnnSAMXjqdiMW3c8TliwZEH5ZXJM76hP4ZfZnyEuuWM22LS/qS7/rPOGwrCLk+rS6yejYSQZWw7hYRmwzMDyDQZuL4ffkbA6JX+1eStS5H8m1iRzcunnkRNGNxGl3Ohn00POgRyQbykUyWEr8TtaX5W4psDWUsw1+j5iBbeJUycKd2sK2go1rVv8FWAeKok8JK34AAAAASUVORK5CYII=","aspectRatio":1.4715189873417722,"src":"/static/79ae8d06516a31df122b4ac4f7cdfcb9/2c576/aws_vpc.png","srcSet":"/static/79ae8d06516a31df122b4ac4f7cdfcb9/c5c6c/aws_vpc.png 930w,\n/static/79ae8d06516a31df122b4ac4f7cdfcb9/2c576/aws_vpc.png 1285w","sizes":"(max-width: 1285px) 100vw, 1285px"}}},"author":[{"id":"Woojin","bio":"This is another test author with a profile background image","avatar":{"children":[{"__typename":"ImageSharp","fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAWAQEBAQAAAAAAAAAAAAAAAAADAQL/2gAMAwEAAhADEAAAAdV5qKgwXH//xAAZEAEBAAMBAAAAAAAAAAAAAAABAgADEgT/2gAIAQEAAQUC27SoISuJy/OsRz0g5//EABcRAQADAAAAAAAAAAAAAAAAAAABAhH/2gAIAQMBAT8BxNH/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/AYxb/8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAAiEQMUH/2gAIAQEABj8CC9iBeaOFWCgZsMc6n//EABsQAQADAQADAAAAAAAAAAAAAAEAESExQVGB/9oACAEBAAE/IXs9PYxNZPCyYB6zWAFPviCw7C9VE7Y//9oADAMBAAIAAwAAABAY7//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxDeJIt//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARUf/aAAgBAgEBPxBAMbfb/8QAGxABAQACAwEAAAAAAAAAAAAAAREAMSFBUYH/2gAIAQEAAT8Qb0BngyYMN1g0Xzu5DRTRVwq5Wq4D5nJCmiAqB5rJ3rJYZ//Z","aspectRatio":1.3333333333333333,"src":"/static/e51acbf8a0e98b7912a2f1b775f15047/2f1b1/woojin.jpg","srcSet":"/static/e51acbf8a0e98b7912a2f1b775f15047/b3d27/woojin.jpg 40w,\n/static/e51acbf8a0e98b7912a2f1b775f15047/5a735/woojin.jpg 80w,\n/static/e51acbf8a0e98b7912a2f1b775f15047/6e81a/woojin.jpg 120w,\n/static/e51acbf8a0e98b7912a2f1b775f15047/2f1b1/woojin.jpg 800w,\n/static/e51acbf8a0e98b7912a2f1b775f15047/c4b07/woojin.jpg 1440w","sizes":"(max-width: 800px) 100vw, 800px"}}]}}]}},"relatedPosts":{"totalCount":1,"edges":[{"node":{"id":"d0f563f2-80a6-5026-b540-b36bc90b8ef9","timeToRead":4,"excerpt":"VPC Virtual Private Cloud 클라우드 상에서 논리적으로 공간을 격리하기 위해 사용한다. VPC 가 없다면 EC…","frontmatter":{"title":"AWS VPC 기본","date":"2021-02-03T00:00:00.000Z"},"fields":{"slug":"/2021-02-03-aws-vpc/index/"}}}]}},"pageContext":{"slug":"/2021-02-03-aws-vpc/index/","prev":{"excerpt":"개요 인터넷에서는 통신한 컴퓨터를 찾기 위해 IP 주소를 사용한다.\n이번 포스팅에서는 IP 주소의 범위를 표기하는 방식인 CIDR 과 public, private IP 개념에 대해 다룬다. CIDR Classless Inter-Domain…","timeToRead":2,"frontmatter":{"title":"CIDR, Public/Private IP","tags":["cidr","IP","public IP","private IP"],"date":"2021-02-02T00:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.015228426395939,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEeUlEQVQ4y61UW0xUVxQdUzpt0cTYJm36035Rf9qPph9UK1IQTKukKWmjCALyRhMFRRFJG9pIkccwDDDDMC95yIDMC5w7w2UAeQ/QIiOPAQozIFARFEsiFIF775zdcy8j8NkmnmRl7bP32evs8+TxcAMAFm9geOwGesUIcTbLbN/loj1ebixidnmsrb/0WNtY52w2xsODeK+9sdXRNJ2OIccziXFfglnCMvZJAAFn78YmtbIVZxiJC7m2/Zzg86XnfNyZgf/UXMDgoRtgAxftgr9XXsD04lPYdEdfVcgftY8OLC4sQkd758aN1HSqkbRQKckpFEk2U02t1ZSeyKTI1hKqsbWSut9XRnVaSWpsbJyacDgou7OfcsyNUG0DFooT3KQ3+N+d/H7ouP83EBz0A3P0sC86cfwk8jtyDIWGhKKIsAjk+5U/SohNRNERMeh87CUUH5uAJhyjaGp6Fkn6TyBiIh0V/R6wdSB83l6+v0/A0NkzERAVGc1Eno2C2HPxEBkWBYoKBVTXqiE8JALycvLYOKSlpkFiXAKMjdlh/slfkNPtDbrRZLjV/fnOkldWVoZWV1eh3WZkTBYDWPu6wDZggxRRFtxQFUBbTzc4nA7oHVdDx2ghNA5mQZejEEbmNCDq9QPNSBLkWr/cElxeXmIPZYjd1MmZB0y9SQsmkoAa9V3QkXq422QGovs+jE/bYdjeD/Y//4ABeyvoiUrosrbDrbZDYBi7AoJe750K8TUZcp8iwzAIFp49gYmZYei3dYHeUAe6JhOIq5TQi6uenZ6Dudl5GHg4DD22MRBYj0Lt8MWdJePLzVZoY+UQ4m4AjRBDb7rW6fmnj+lJp5O29vXSOr2Bnpx10hOPpuipuUf0/Pxj+sHgQ7q+p5rud1rp2eVBerfgFPzP9mLtH1hYegYMs+PbfilYNBNzJYYUQ+GG3A2pm5UYKndM6kKMwu3D7LqNWcZ9DN5BaVtv8IPgt0+fF3p5+Vzat/9g+DuBITcPePkk7Y+7rjj49Y8ZB3i899/Eo/YEhmW+l55T8xn/43DPvR+FvOXpdWofm37ucsmHnE6BnNjDsqSM9MF2TV6psVZcYdGJlOaKAoVJJb3TRIjLSB2GNF9hihOpGhJkVU2a4jJSo1A3a8Xljeai2w3RJRWWap5QTnCiamMvJ/qTQBuQLTVmFarMQVnFhtCcknuX8+Wm+HyZ8Qwee0UoMwYXqcz++XLi1M+C2sSsIn20UGEKzy2p//QXYe0nnNgdfcf2z3OzyOCLZ7yYK6k7VKg0lYjLGsQydXNhnvSeAAuWFigIGU4WVmjbY7OK637DE4mUNS2ZknIyTqQgvuCJy8mtCg2d7/4q1MTjZWQqqlvEODktX0b44oSrWDRTVdNyVSg3xmDBpBxJnR9OvqBUNx8prWxkRa+XVjVnF8iNcbxCpZkTrNS2e2bka47lyUzhkgrLhbxS4nSGUBsokBHXRCpzWnG5JQknJuOJsrHv2wJlwzXRbTIA+2Lw1iTifqqg1JjKiZVr2l7bZ/0vFkbJ84fOPr0AAAAASUVORK5CYII=","sizes":"(max-width: 400px) 100vw, 400px","src":"/static/87d9070e0900b2863f59e1b35c879857/497c6/ip-address.png","srcSet":"/static/87d9070e0900b2863f59e1b35c879857/497c6/ip-address.png 400w"}}},"author":[{"id":"Woojin","bio":"This is another test author with a profile background image","avatar":{"children":[{"fluid":{"aspectRatio":1.3333333333333333,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAWAQEBAQAAAAAAAAAAAAAAAAADAQL/2gAMAwEAAhADEAAAAdV5qKgwXH//xAAZEAEBAAMBAAAAAAAAAAAAAAABAgADEgT/2gAIAQEAAQUC27SoISuJy/OsRz0g5//EABcRAQADAAAAAAAAAAAAAAAAAAABAhH/2gAIAQMBAT8BxNH/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/AYxb/8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAAiEQMUH/2gAIAQEABj8CC9iBeaOFWCgZsMc6n//EABsQAQADAQADAAAAAAAAAAAAAAEAESExQVGB/9oACAEBAAE/IXs9PYxNZPCyYB6zWAFPviCw7C9VE7Y//9oADAMBAAIAAwAAABAY7//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxDeJIt//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARUf/aAAgBAgEBPxBAMbfb/8QAGxABAQACAwEAAAAAAAAAAAAAAREAMSFBUYH/2gAIAQEAAT8Qb0BngyYMN1g0Xzu5DRTRVwq5Wq4D5nJCmiAqB5rJ3rJYZ//Z","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/e51acbf8a0e98b7912a2f1b775f15047/2f1b1/woojin.jpg","srcSet":"/static/e51acbf8a0e98b7912a2f1b775f15047/fd013/woojin.jpg 200w,\n/static/e51acbf8a0e98b7912a2f1b775f15047/25252/woojin.jpg 400w,\n/static/e51acbf8a0e98b7912a2f1b775f15047/2f1b1/woojin.jpg 800w,\n/static/e51acbf8a0e98b7912a2f1b775f15047/0ff54/woojin.jpg 1200w,\n/static/e51acbf8a0e98b7912a2f1b775f15047/c4b07/woojin.jpg 1440w"}}]}}]},"fields":{"layout":"","slug":"/2021-02-02-cidr-public-private-ip/index/"}},"next":null,"primaryTag":"AWS"}},"staticQueryHashes":["1065875448","4129920265"]}